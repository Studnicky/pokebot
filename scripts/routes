var querystring, url;

url = require('url');
querystring = require('querystring');

module.exports = function(robot) {
  return robot.router.get("/hubot/message", function(req, res) {
    var error, query, user;
    query = querystring.parse(url.parse(req.url).query);
    user = {};
    if (query.room) {
      user.room = query.room;
    }
    try {
      robot.send(user, "INCOMING MESSAGE: " + query.message);
      return res.end("message sent: " + query.message);
    } catch (_error) {
      error = _error;
      return console.log("message-listner error: " + error + ".");
    }
  });
};